FROM deepseek-llm:7b-chat

# Dynamic context size based on system memory
PARAMETER num_ctx {{ if gt .Memory 32 }}2048{{ else }}1024{{ end }}

# Adaptive prediction length based on resources
PARAMETER num_predict {{ if gt .Memory 32 }}200{{ else }}150{{ end }}

# Balanced creativity/consistency setting
PARAMETER temperature 0.7
PARAMETER top_k 20
PARAMETER top_p 0.8
PARAMETER repeat_penalty 1.1
PARAMETER repeat_last_n 64

# Disable Mirostat
PARAMETER mirostat 0
PARAMETER mirostat_eta 0.1
PARAMETER mirostat_tau 5.0

# Add seed for consistent responses
PARAMETER seed 42
